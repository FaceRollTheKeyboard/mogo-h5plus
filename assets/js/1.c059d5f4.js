(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{157:function(t,s,e){"use strict";e.r(s);var a=e(0),r=Object(a.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),e("p",[t._v("热更新能够不提交应用商店审核而修改 APP 内容,使得 app 的迭代变的非常灵活.")]),t._m(1),t._m(2),e("p",[t._v("在使用热更新前,请看完这份介绍再使用.")]),t._m(3),e("p",[t._v("对于安卓来说,热更新是没有任何问题的,但是苹果您可以看下面这段话.")]),t._m(4),t._m(5),t._m(6),t._m(7),e("p",[t._v("安装更新在这里指的就是更新大版本,比如添加了模块,必须重新安装.")]),t._m(8),t._m(9),t._m(10),t._m(11),t._m(12),t._m(13),t._m(14),t._m(15),t._m(16),e("p",[t._v("热更新分为两种,在 ios 和安卓都可以使用:")]),t._m(17),t._m(18),t._m(19),t._m(20),t._m(21),t._m(22),t._m(23),t._m(24),t._m(25),e("p",[t._v("Femirror 是一个自动化更新平台,无需后端也可以完成 app 日常更新.目前正在测试中,将会很快公测.您还可以给他"),e("router-link",{attrs:{to:"../about.html#赞助"}},[t._v("赞助加速")])],1),e("img",{attrs:{src:t.$withBase("/s0.png"),alt:"foo"}})])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"热更新-安装更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#热更新-安装更新","aria-hidden":"true"}},[this._v("#")]),this._v(" 热更新/安装更新")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[e("code",[t._v("MogoH5+")]),t._v("在"),e("code",[t._v("1.3.0")]),t._v("后加入了"),e("code",[t._v("热更新/安装更新")]),t._v("的集成.同时,我们的"),e("code",[t._v("热更新服务器")]),t._v("也在内测中,将在不久公测使用.您无需后端就可以完成整个软件的"),e("code",[t._v("热更新/安装更新")]),t._v("服务.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#介绍","aria-hidden":"true"}},[this._v("#")]),this._v(" 介绍")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"热更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#热更新","aria-hidden":"true"}},[this._v("#")]),this._v(" 热更新")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"app-store-应用更新说明-引自-dcloud"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#app-store-应用更新说明-引自-dcloud","aria-hidden":"true"}},[this._v("#")]),this._v(" App store 应用更新说明(引自 dcloud)")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("应用资源更新肯定是违反 apple 政策的，但目前看起来它也不管。你在官网案例那里下载 Appstore 版本的那些 app，大多启动后都会提示更新，反正也都没下架。如果你不是很大的公司，apple 不会理睬你。如果你是大公司，建议不要做整体更新，每次更新几个页面，也不要提示更新后需要重启，这样会安全点。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("作者本人的实践中也经常使用热更新,名声不大,不频繁基本上可以自由使用.\n同样,我们加入了"),s("code",[this._v("静默更新")]),this._v("这种比较无脑的更新.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"安装更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装更新","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装更新")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"在安卓的安装更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在安卓的安装更新","aria-hidden":"true"}},[this._v("#")]),this._v(" 在安卓的安装更新")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("可以让 APP 提示,然后用户选择自己下载安装")]),s("li",[this._v("应用商店更新")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"在苹果的安装更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在苹果的安装更新","aria-hidden":"true"}},[this._v("#")]),this._v(" 在苹果的安装更新")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("必须提交 AppStore 提交审核")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在这里顺便提一下,苹果用户的习惯一般是自己主动更新.\n在苹果应用商店的大厂 app (微信,淘宝,京东) 更新几乎不会受到 app 的更新推送,也没有所谓"),s("code",[this._v("检查更新")]),this._v("的功能,也就是说,更新是用户主动操作的.我们的"),s("code",[this._v("迭代")]),this._v("同样也遵循这条"),s("code",[this._v("行规")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"checkupdate-函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#checkupdate-函数","aria-hidden":"true"}},[this._v("#")]),this._v(" checkUpdate 函数")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("可以在"),s("code",[this._v("main.js")]),this._v("中添加"),s("code",[this._v("checkUpdate();")]),this._v(",打开 app 就会自动检测.还可以放在"),s("code",[this._v("检查更新")]),this._v("的按钮上触发.")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" checkUpdate "),e("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{attrs:{class:"token string"}},[t._v('"./utils/update"')]),e("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{attrs:{class:"token function"}},[t._v("checkUpdate")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"热更新配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#热更新配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 热更新配置")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("静默更新 : 使用"),s("code",[this._v("checkUpdate")]),this._v("方法后检查更新,如果有更新会自动下载并重启 app,整个过程没有任何提示.")]),s("li",[this._v("提示更新 : 使用"),s("code",[this._v("checkUpdate")]),this._v("方法后检查更新,如果有则会弹出确认框,用户确认后会提示正在下载,正在安装,安装完成重启,更新完成等提示.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"后端返回的数据格式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#后端返回的数据格式","aria-hidden":"true"}},[this._v("#")]),this._v(" 后端返回的数据格式")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("table",[e("thead",[e("tr",[e("th",[t._v("名称")]),e("th",[t._v("描述")]),e("th",[t._v("参数")])])]),e("tbody",[e("tr",[e("td",[t._v("name")]),e("td",[t._v("版本号 如果检测的版本大于本地版本就会更新")]),e("td",[t._v("string")])]),e("tr",[e("td",[t._v("title")]),e("td",[t._v("升级提示标题")]),e("td",[t._v("string")])]),e("tr",[e("td",[t._v("description")]),e("td",[t._v("升级提示内容")]),e("td",[t._v("string")])]),e("tr",[e("td",[t._v("platform")]),e("td",[t._v("符合升级的平台 ios:升级苹果 android:升级安卓 both:都更新")]),e("td",[e("code",[t._v("ios")]),e("code",[t._v("android")]),e("code",[t._v("both")])])]),e("tr",[e("td",[t._v("type")]),e("td",[t._v("安装类型 wgt:热更新 apk:安装更新")]),e("td",[e("code",[t._v("wgt")]),t._v(","),e("code",[t._v("apk")])])]),e("tr",[e("td",[t._v("hotupdate_type")]),e("td",[t._v("更新提示 silence:静默更新 tip:提示更新 (apk 的安装是需要提示的)")]),e("td",[e("code",[t._v("silence")]),t._v(","),e("code",[t._v("tip")])])]),e("tr",[e("td",[t._v("android_url")]),e("td",[t._v("更新下载地址 以"),e("code",[t._v(".apk")]),t._v(","),e("code",[t._v(".wgt")]),t._v("结尾的 http 地址")]),e("td",[t._v("url")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("下面是一个完整的数据返回 返回格式为"),s("code",[this._v("application/json")]),this._v(" ,返回状态码为"),s("code",[this._v("200")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("下面这段"),s("code",[this._v("json")]),this._v("可以表达为:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("更新平台为 "),s("code",[this._v("全部平台")])]),s("li",[s("code",[this._v("热更新")])]),s("li",[s("code",[this._v("提示更新")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{attrs:{class:"token property"}},[t._v('"name"')]),e("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{attrs:{class:"token string"}},[t._v('"2.2.1"')]),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{attrs:{class:"token property"}},[t._v('"title"')]),e("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{attrs:{class:"token string"}},[t._v('"发现新版本,快来使用吧!"')]),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{attrs:{class:"token property"}},[t._v('"description"')]),e("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{attrs:{class:"token string"}},[t._v('"1.增加了....\\n 2.修复了... 3.杀了一个程序员祭天"')]),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{attrs:{class:"token property"}},[t._v('"platform"')]),e("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{attrs:{class:"token string"}},[t._v('"both"')]),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{attrs:{class:"token property"}},[t._v('"type"')]),e("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{attrs:{class:"token string"}},[t._v('"wgt"')]),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{attrs:{class:"token property"}},[t._v('"hotupdate_type"')]),e("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{attrs:{class:"token string"}},[t._v('"tip"')]),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{attrs:{class:"token property"}},[t._v('"android_url"')]),e("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{attrs:{class:"token string"}},[t._v('"http://cdn.femirror.com/H5FD926B1.wgt"')]),t._v("\n"),e("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("注意 : 返回"),s("code",[this._v("200")]),this._v("以外的状态码将不被处理")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"femirror"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#femirror","aria-hidden":"true"}},[this._v("#")]),this._v(" Femirror")])}],!1,null,null,null);s.default=r.exports}}]);